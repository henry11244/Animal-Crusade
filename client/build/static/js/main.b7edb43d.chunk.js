(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{61:function(e,t){},62:function(e,t){},75:function(e,t,n){"use strict";n.r(t);var a,c,r,s,o,i=n(2),l=n.n(i),j=n(60),b=n.n(j),d=n(13),u=n(6),m=n(24),h=n(65),O=n(87),x=n(88),g=n(85),p=n(63),f=n(90),v=n(61),w=n.n(v),k=n(62),y=n.n(k),N=n(27),S=n(86),T=Object(S.a)(a||(a=Object(N.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      password\n      scores []\n    }\n  }\n"]))),$=n(3),I=function(){var e=Object(f.a)(T),t=e.loading;e.data;return Object($.jsx)("main",{children:Object($.jsx)("div",{className:"flex-row justify-center",children:Object($.jsx)("div",{className:"col-12 col-md-10 my-3",children:t?Object($.jsx)("div",{children:"Loading..."}):Object($.jsxs)($.Fragment,{children:[Object($.jsx)(w.a,{}),Object($.jsx)(y.a,{})]})})})})},_=n(35),C=n(46),D=n(31),F=n(10),A=n(83),Y=Object(S.a)(c||(c=Object(N.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),L=Object(S.a)(r||(r=Object(N.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),U=(Object(S.a)(s||(s=Object(N.a)(["\n  mutation addThought($thoughtText: String!) {\n    addThought(thoughtText: $thoughtText) {\n      _id\n      thoughtText\n      thoughtAuthor\n      createdAt\n      comments {\n        _id\n        commentText\n      }\n    }\n  }\n"]))),Object(S.a)(o||(o=Object(N.a)(["\n  mutation addComment($thoughtId: ID!, $commentText: String!) {\n    addComment(thoughtId: $thoughtId, commentText: $commentText) {\n      _id\n      thoughtText\n      thoughtAuthor\n      createdAt\n      comments {\n        _id\n        commentText\n        createdAt\n      }\n    }\n  }\n"]))),n(14)),z=n(15),B=n(52),E=new(function(){function e(){Object(U.a)(this,e)}return Object(z.a)(e,[{key:"getProfile",value:function(){return Object(B.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(B.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),M=function(){var e=Object(i.useState)({username:"",password:""}),t=Object(F.a)(e,2),n=t[0],a=t[1],c=Object(A.a)(L),r=Object(F.a)(c,2),s=r[0],o=r[1],l=o.error,j=o.data,b=function(e){var t=e.target,c=t.name,r=t.value;a(Object(m.a)(Object(m.a)({},n),{},Object(D.a)({},c,r)))},u=function(){var e=Object(C.a)(Object(_.a)().mark((function e(t){var a,c;return Object(_.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,s({variables:Object(m.a)({},n)});case 5:a=e.sent,c=a.data,E.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object($.jsx)("main",{className:"flex-row justify-center mb-4",children:Object($.jsx)("div",{className:"col-12 col-lg-10",children:Object($.jsxs)("div",{className:"card",children:[Object($.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object($.jsxs)("div",{className:"card-body",children:[j?Object($.jsxs)("p",{children:["Success! You may now head"," ",Object($.jsx)(d.b,{to:"/",children:"back to the homepage."})]}):Object($.jsxs)("form",{onSubmit:u,children:[Object($.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:n.username,onChange:b}),Object($.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:b}),Object($.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object($.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},q=function(e){var t=Object(i.useState)({username:"",password:""}),n=Object(F.a)(t,2),a=n[0],c=n[1],r=Object(A.a)(Y),s=Object(F.a)(r,2),o=s[0],l=s[1],j=l.error,b=l.data,u=function(e){var t=e.target,n=t.name,r=t.value;c(Object(m.a)(Object(m.a)({},a),{},Object(D.a)({},n,r)))},h=function(){var e=Object(C.a)(Object(_.a)().mark((function e(t){var n,r;return Object(_.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,o({variables:Object(m.a)({},a)});case 5:n=e.sent,r=n.data,E.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({username:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object($.jsx)("main",{className:"flex-row justify-center mb-4",children:Object($.jsx)("div",{className:"col-12 col-lg-10",children:Object($.jsxs)("div",{className:"card",children:[Object($.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object($.jsxs)("div",{className:"card-body",children:[b?Object($.jsxs)("p",{children:["Success! You may now head"," ",Object($.jsx)(d.b,{to:"/",children:"back to the homepage."})]}):Object($.jsxs)("form",{onSubmit:h,children:[Object($.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:a.username,onChange:u}),Object($.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:u}),Object($.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object($.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},J=function(){return Object($.jsx)("header",{className:"bg-info text-dark mb-4 py-3 display-flex align-center",children:Object($.jsxs)("div",{className:"container flex-column justify-space-between-lg justify-center align-center text-center",children:[Object($.jsx)(d.b,{className:"text-dark",to:"/",children:Object($.jsx)("h1",{className:"m-0",style:{fontSize:"3rem"},children:"Tech Friends"})}),Object($.jsx)("p",{className:"m-0",style:{fontSize:"1.75rem",fontWeight:"700"},children:"Meet your new programming pals."}),Object($.jsx)("div",{children:E.loggedIn()?Object($.jsxs)($.Fragment,{children:[Object($.jsx)(d.b,{className:"btn btn-lg btn-primary m-2",to:"/me",children:"View My Profile"}),Object($.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),E.logout()},children:"Logout"})]}):Object($.jsxs)($.Fragment,{children:[Object($.jsx)(d.b,{className:"btn btn-lg btn-primary m-2",to:"/login",children:"Login"}),Object($.jsx)(d.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},P=function(){var e=Object(u.e)(),t=Object(u.f)();return Object($.jsx)("footer",{className:"w-100 mt-auto text-dark p-4",children:Object($.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object($.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t(-1)},children:"\u2190 Go Back"}),Object($.jsxs)("h4",{children:["\xa9 ",(new Date).getFullYear()," - Tech Friends"]})]})})},G=Object(h.a)({uri:"/graphql"}),V=Object(p.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(m.a)(Object(m.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),W=new O.a({link:V.concat(G),cache:new x.a});var H=function(){return Object($.jsx)(g.a,{client:W,children:Object($.jsx)(d.a,{children:Object($.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object($.jsx)(J,{}),Object($.jsxs)("div",{className:"container",children:[Object($.jsxs)(u.c,{children:[Object($.jsx)(u.a,{path:"/",element:Object($.jsx)(I,{})}),Object($.jsx)(u.a,{path:"/login",element:Object($.jsx)(q,{})}),Object($.jsx)(u.a,{path:"/signup",element:Object($.jsx)(M,{})})]}),Object($.jsx)("div",{children:"app test"})]}),Object($.jsx)(P,{})]})})})};b.a.render(Object($.jsx)(l.a.StrictMode,{children:Object($.jsx)(d.a,{basename:".",children:Object($.jsx)(u.c,{children:Object($.jsx)(u.a,{path:"*",element:Object($.jsx)(H,{}),exact:!1,strict:!1})})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.b7edb43d.chunk.js.map